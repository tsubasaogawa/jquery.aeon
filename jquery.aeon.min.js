var aeons = null, draw_aeons = function (t) { for (var e in $("#aeon-contents").html("&nbsp;"), t) { var r = [], a = t[e]; for (var s in r.push("<h3>" + a.name + '</h3><div class="row"><div class="col-sm-12 col-md-7"><img src="images/aeon_' + a.id + '.jpg" class="img-responsive" loading="lazy" /></div><div class="col-sm-12 col-md-5"><table class="table"><thead><th colspan="2">Details</th></thead><tbody><tr><td>Location</td><td>' + a.location + "</td></tr><tr><td>Open</td><td>" + a.open + "</td></tr><tr><td>Tel</td><td>" + a.tel + "</td></tr><tr><td>Visit day</td><td>" + a.visit + '</td></tr><tr><td>URL</td><td><a href="' + a.url + '" target="_blank">' + a.url + '</a></td></tr></tbody></table></div><div class="col-sm-12 col-md-6"><table class="table table-condensed rating"><thead><tr><th colspan="2">Ratings</th></tr></thead><tbody><tr><td>Building scale</td><td><span class="badge">' + a.ratings.build_scale + '</span></td></tr><tr><td>Accessibility</td><td><span class="badge">' + a.ratings.access + '</span></td></tr><tr><td>Food court</td><td><span class="badge">' + a.ratings.food_court + '</span></td></tr><tr><td>Favorite</td><td><span class="badge">' + a.ratings.favorite + '</span></td></tr></tbody></table></div><div class="col-sm-12 col-md-6"><h4>Comments</h4><ul>'), a.comments) r.push("<li>" + a.comments[s] + "</li>"); r.push("</ul></div></div><hr />"), $("#aeon-contents").append(r.join("")) } return !0 }, get_aeon_count_as_pref = function (t) { for (var e = [], r = 1; r <= 47; r++)e[r] = 0; for (var r in t) e[t[r].prefecture]++; return e }, get_regions = function (t) { var e = null; switch (t) { case 0: default: e = { start: 1, end: 1 }; break; case 1: e = { start: 2, end: 7 }; break; case 2: e = { start: 8, end: 14 }; break; case 3: e = { start: 15, end: 23 }; break; case 4: e = { start: 24, end: 30 }; break; case 5: e = { start: 31, end: 35 }; break; case 6: e = { start: 36, end: 39 }; break; case 7: e = { start: 40, end: 46 }; break; case 8: e = { start: 47, end: 47 } }return e }, sort_aeons = function (t, e, r = !0) { var a = _.sortBy(t, function (t) { return e.indexOf(".") > -1 ? t[(keys = e.split("."))[0]][keys[1]] : t[e] }); return r ? a.reverse() : a }; jQuery(document).ready(function (t) { var e = [{ code: 1, color: "#ff99a8", prefectures: [] }, { code: 2, color: "#fff099", prefectures: [] }, { code: 3, color: "#a8ff99", prefectures: [] }, { code: 4, color: "#ffffff", prefectures: [] }], r = function (r) { for (var a = [{ code: 1, thres: 8 }, { code: 2, thres: 5 }, { code: 3, thres: 1 }], s = 1; s <= 47; s++) { var n = !1; for (var o in a) if (r[s] >= a[o].thres) { e[o].prefectures.push(s), n = !0; break } n || e[e.length - 1].prefectures.push(s) } return t("#map-container").japanMap({ areas: e, selection: "prefecture", borderLineWidth: .25, borderLineColor: "#333333", drawsBoxLine: !1, movesIslands: !0, showsAreaName: !1, width: 640, font: "MS Mincho", fontSize: 12, fontColor: "areaColor", fontShadowColor: "black" }), !0 }; t.when(t.getJSON("./data.json", function (t) { aeons = t.aeon })).done(function () { draw_aeons(aeons), r(get_aeon_count_as_pref(aeons)) }) }); var redraw_aeons = function (t) { var e = document.filter_sort, r = { filter: { type: e.filter_type.value }, sort: { type: e.sort_type.value } }; return "region" === r.filter.type && (pref_offsets = get_regions(e.filter_region_name.selectedIndex), t = _.filter(t, function (t) { return pref = t.prefecture, pref_offsets.start <= pref && pref <= pref_offsets.end })), t = sort_aeons(t, r.sort.type, e.sort_option_desc.checked), draw_aeons(t), !0 };